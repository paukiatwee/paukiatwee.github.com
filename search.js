var docs = 
[ 

  {
  "id"    : "http://dreamand.me/java/java-jee7-jpa-stored-procedure-example/",
  "title"   : "Java JEE7 JPA 2.1 Stored Procedure Example",
  "content" : "JEE 7, the next release of Java Enterprice for large application will include a new enchanced JPA 2.1. JPA 2.1 now have native support for stored procedure. Folllow this blog post to know how to use soted procedure in JPA 2.1.Let get started how to use JPA 2.1 to execute stored procedure.DependenciesI use maven to manage dependencies, the following pom.xml show the dependencies that I used:&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;        &lt;artifactId&gt;javax.persistence&lt;/artifactId&gt;        &lt;version&gt;2.1.0&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;        &lt;artifactId&gt;org.eclipse.persistence.jpa&lt;/artifactId&gt;        &lt;version&gt;2.5.0&lt;/version&gt;    &lt;/dependency&gt;    &lt;!-- jdbc driver for Postgresql --&gt;    &lt;dependency&gt;        &lt;groupId&gt;postgresql&lt;/groupId&gt;        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;        &lt;version&gt;9.1-901.jdbc4&lt;/version&gt;        &lt;scope&gt;runtime&lt;/scope&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;The JPA 2.1 implementation that I use is Eclipselink, which is Reference Implementation for JPA 2.1.Note the database that I use is Postgresql, you can use appropiate JDBC driver for your database. Setup persistence.xml for JPA 2.1The persistence.xml for JPA 2.1 is similar with that of JPA 2.0, but with the different version of xsd. The following shows the persistence.xml that I used for JPA 2.1:&lt;?xml version=1.0 encoding=UTF-8?&gt;&lt;persistence version=2.1 xmlns=http://xmlns.jcp.org/xml/ns/persistence              xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance              xsi:schemaLocation=http://java.sun.com/xml/ns/persistence                                                  http://java.sun.com/xml/ns/persistence/persistence_2_1.xsd&gt;  &lt;persistence-unit name=transactions-optional&gt;    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;    &lt;properties&gt;      &lt;property name=javax.persistence.jdbc.driver value=org.postgresql.Driver/&gt;      &lt;property name=javax.persistence.jdbc.url value=jdbc:postgresql://localhost:5432/dreamandme/&gt;      &lt;property name=javax.persistence.jdbc.user value=postgres/&gt;      &lt;property name=javax.persistence.jdbc.password value=password/&gt;      &lt;property name=eclipselink.ddl-generation value=create-tables/&gt;    &lt;/properties&gt;  &lt;/persistence-unit&gt;&lt;/persistence&gt;Create Stored Procedure For PostgresqlIn this example, I use Postgresql as database. The follows is the stored procedured that I created for this tutorial:CREATE FUNCTION sales_tax(subtotal float, OUT tax float) AS $$BEGIN    tax := subtotal * 0.06;END;$$ LANGUAGE plpgsql;This stored procedure simple take subtotal as IN then tax as OUT.Java JPA 2.1 Stored Procedure CallThe next step is going to the main purpose of the example, call stored procedure in Java JEE7 JPA 2.1, the following is the example code:package me.dreamand.jee7.jpa21;import javax.persistence.EntityManager;import javax.persistence.EntityManagerFactory;import javax.persistence.ParameterMode;import javax.persistence.Persistence;import javax.persistence.StoredProcedureQuery;public class App {    private static final String PERSISTENCE_UNIT_NAME = transactions-optional;    private static EntityManagerFactory factory;    public static void main(String[] args) {        factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);        EntityManager em = factory.createEntityManager();        // Create call stored procedure        em.getTransaction().begin();        StoredProcedureQuery storedProcedure = em.createStoredProcedureQuery(sales_tax);        // set parameters        storedProcedure.registerStoredProcedureParameter(subtotal, Double.class, ParameterMode.IN);        storedProcedure.registerStoredProcedureParameter(tax, Double.class, ParameterMode.OUT);        storedProcedure.setParameter(subtotal, 1f);        // execute SP        storedProcedure.execute();        // get result        Double tax = (Double)storedProcedure.getOutputParameterValue(tax);        System.out.println(Tax is:  + tax);        em.getTransaction().commit();        em.close();    }}Run the main method, the console will output the following text:Tax is: 0.06ConclusionWith the new Java JEE7 JPA 2.1 release bring stored procedure support to the next level without using JDBC low level API. This bring JEE7 to the next most awaited release of JEE."
},

  {
  "id"    : "http://dreamand.me/java/jee7-websocket-example/",
  "title"   : "JEE7 WebSocket Example",
  "content" : "JEE 7, the next release of Java Enterprice for large application will include a standard WebSocket API for create realtime communication channel over a single TCP connection. The realtime communication allow server to push message to clients in realtime. This tutorial will teach step by step to create a realtime chat program using JEE7 WebSocket API. There are two ways to using  JEE7&#8217;s WebSocket API, one is using annotations and another is using normal OO concept to extend classes. This tutorial will mainly focus on using annotations based API.Maven DependenciesRecommended way to manage Java Application&#8217;s dependencies is using maven. This tutorial will using maven to manage dependencies. Include the following snippet into your pom file dependencies section:&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;javax&lt;/groupId&gt;        &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;        &lt;version&gt;7.0-b83&lt;/version&gt;        &lt;scope&gt;provided&lt;/scope&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;javax.websocket&lt;/groupId&gt;        &lt;artifactId&gt;javax.websocket-api&lt;/artifactId&gt;        &lt;version&gt;1.0-rc5&lt;/version&gt;        &lt;scope&gt;provided&lt;/scope&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;Note that the latest version of WebSocket API is rc5, to get the latest version, please browse to maven repo websocket to check out.Annotation UsageBefore get start to use JEE7 WebSocket, let introduce the usage of the annotations:            Annotation      Description                  @ServerEndpoint      Annotate class as server end point              @OnOpen      Involked when new connection is established              @OnMessage      Involked when new message is received              @OnClose      Involked when existing connection is closd              @OnError      Involked when there is error in communication channel      Chat ProgramBased on the annotation usage, we can create a simple chat program using the following code:package me.dreamand.blog.websocket;import java.util.logging.Level;import java.util.logging.Logger;import javax.websocket.OnClose;import javax.websocket.OnError;import javax.websocket.OnMessage;import javax.websocket.OnOpen;import javax.websocket.Session;import javax.websocket.server.ServerEndpoint;@ServerEndpoint(value = /chat)public class ChatServer {        private static final Logger LOGGER =             Logger.getLogger(ChatServer.class.getName());        @OnOpen    public void onOpen(Session session) {        LOGGER.log(Level.INFO, New connection with client: {0},                 session.getId());    }        @OnMessage    public String onMessage(String message, Session session) {        LOGGER.log(Level.INFO, New message from Client [{0}]: {1},                 new Object[] {session.getId(), message});        return Server received [ + message + ];    }        @OnClose    public void onClose(Session session) {        LOGGER.log(Level.INFO, Close connection for client: {0},                 session.getId());    }        @OnError    public void onError(Throwable exception, Session session) {        LOGGER.log(Level.INFO, Error for client: {0}, session.getId());    }}HTML and Javascript For WebSocketThe next step is to create a client for the chat program. The browser must support WebSocket. The following shows the HTML, CSS, and JavaScript for the browser:&lt;!DOCTYPE html&gt;&lt;html&gt;    &lt;head&gt;        &lt;title&gt;JEE7 WebSocket Example&lt;/title&gt;        &lt;meta http-equiv=Content-Type content=text/html; charset=UTF-8&gt;        &lt;link rel=shortcut icon href=/websocket/favicon.ico&gt;        &lt;style&gt;            #container {                border: 1px #999999 solid;                padding: 10px;            }            p.client {                border-bottom: 1px aquamarine solid;            }            p.server {                border-bottom: 1px crimson solid;            }            input {                padding: 5px;                width: 250px;            }            button {                padding: 5px;            }        &lt;/style&gt;        &lt;script&gt;            var chatClient = new WebSocket(ws://localhost:8080/websocket/chat);                        chatClient.onmessage = function(evt) {                var p = document.createElement(p);                p.setAttribute(class, server);                p.innerHTML = Server:  + evt.data;                var container = document.getElementById(container);                container.appendChild(p);            }            function send() {                var input = document.getElementById(message);                var p = document.createElement(p);                p.setAttribute(class, client);                p.innerHTML = Me:  + input.value;                var container = document.getElementById(container);                container.appendChild(p);                chatClient.send(input.value);                input.value = ;            }        &lt;/script&gt;    &lt;/head&gt;    &lt;body&gt;        &lt;h1&gt;JEE7 WebSocket Example&lt;/h1&gt;        &lt;div id=container&gt;                    &lt;/div&gt;        &lt;input type=text id=message name=message /&gt;        &lt;button type=button id=send onclick=send()&gt;Send&lt;/button&gt;    &lt;/body&gt;&lt;/html&gt;Running JEE7 WebSocket ApplictionTo run JEE7 WebSocket enabled application, this tutorial is deploy to GlassFish 4.The following screenshot show the UI and server log for the program:ConclusionJEE7 is joining the new HTML5 wave for WebSocket for duplex comunication channel. Realtime commication is one of the essential aspect for enterprise application, now with native support without AJAX pooling. In the near future will have large scale applications deploy to use this feature."
},

  {
  "id"    : "http://dreamand.me/web/better-url-for-seo/",
  "title"   : "Better URL for SEO for E-Commerce and Dynamic Website",
  "content" : "Want better SEO for your e-commerce and dynamic website? Want to increase organic search for your e-commerce and dynamic website? This post will shows how to build better URL for your website and increase sell and better page impression.Use CaseLet say your website is selling cars, and to have better SEO for your site, you can follow this post to design the URL that boost organic search to a better score. Identify URL HierarchyTo design a truely SEO friendly URL for this use case, let see what is the hierarchy for cars. To easily identify the hierarchy, you can follow your database design, for example, one make have one to many models, and one models have zero to many post on your website.Then you can know that the URL structur is like:http://exmple.com/make/model/postThus the actual URL might look like:http://exmple.com/honda/civic/1-honda-civic-for-sellTips:If the hierarchy is too deep, you can use shorter URL for each individual post, for example:http://exmple.com/show/1-honda-civic-for-sellBut remember, include a breadcrumb in the page to let user to navigate up to the hierarchy, for example:Home &gt; Honda &gt; Civic &gt; Honda Civic For SellBy thi way, the visitor will happy and Google Search will intelgent enough to identify your website structure.SEO Friendly URLAfter identified the URL structure, the next step is to purpose a friendly URL. The followings shows the guideline for friendly URL:  All lowercase (Yes, some website still mixing uppercase and lowercase)  No whitespace, and whitespace is replaced by hyphen (&#8220;-&#8220;)  Not too long (Less than 85 characters)  Contain one to three keywords, not too much  ASCII only charactersUsing the guideline, a friendly URL example is show at below:http://exmple.com/mercedes-benz/c-class/1-mercedes-benz-c-class-for-sellorhttp://exmple.com/honda/civic/1-honda-civic-for-sellBetter Search Landing PageSo your website contain a search box for visitors to search for what they really want, instead of landing to a page with URL http://exmple.com/search?q=honda, you can redirect to a dedicated page for all honda&#8217;s cars with better SEO URL as follow:http://exmple.com/hondaorhttp://exmple.com/honda/civicfor paginationhttp://exmple.com/honda/civic?page=2By using this tip, you provide a better SEO friendly URL for Search Engine to index and user friendly too.Ask Google Index Your URLsThe ultimate step is to index all of your URLs using sitemap.xml by generating all of the possible URLs for your website. But do not generate individual URL for each post in sitemap.xml, instead, Google will index the individual post via the search landing page.Example of sitemap.xml:&lt;?xml version=1.0 encoding=UTF-8?&gt;&lt;urlset    xmlns=http://www.sitemaps.org/schemas/sitemap/0.9    xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance    xsi:schemaLocation=http://www.sitemaps.org/schemas/sitemap/0.9            http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&gt;  &lt;url&gt;    &lt;loc&gt;http://example.com&lt;/loc&gt;    &lt;changefreq&gt;daily&lt;/changefreq&gt;    &lt;priority&gt;0.8&lt;/priority&gt;  &lt;/url&gt;  &lt;url&gt;    &lt;loc&gt;http://example.com/audi&lt;/loc&gt;    &lt;changefreq&gt;daily&lt;/changefreq&gt;  &lt;/url&gt;  &lt;url&gt;    &lt;loc&gt;http://example.com/hyundai&lt;/loc&gt;    &lt;changefreq&gt;daily&lt;/changefreq&gt;  &lt;/url&gt;&lt;/urlset&gt;Sitemaps are particularly helpful if:  Your site has dynamic content.  Your site has pages that aren&#8217;t easily discoverd by Googlebot during the crawl process-for example, pages featuring rich AJAX or images.  Your site is new and has few links to it. (Googlebot crawls the web by following links from one page to another, so if your site isn&#8217;t well linked, it may be hard to Google to discover it.)ConclusionFollowing this post&#8217;s tips and guideline, you can increase your website&#8217;s organic search impression and more visitors will visit your site."
},

  {
  "id"    : "http://dreamand.me/java/jee7-json-example/",
  "title"   : "JEE7 JSON API Example",
  "content" : "JEE 7, the next release of Java Enterprice Edition for large application will include a standard JSON API without using third party JSON API such as [JSON.org][jsobn-org]. Is time to use standard API for Java web development.SetupI use maven for managing dependencies and the RI for JSON API is from glassfish. You can download the jars into your project as well from json-api and json-ri from maven site if you not using maven to manage dependency. The example pom.xml is as below:&lt;?xml version=1.0 encoding=UTF-8?&gt;&lt;project xmlns=http://maven.apache.org/POM/4.0.0         xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance         xsi:schemaLocation=http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&gt;  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  &lt;groupId&gt;me.dreamand&lt;/groupId&gt;  &lt;artifactId&gt;json&lt;/artifactId&gt;  &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;  &lt;build&gt;    &lt;plugins&gt;      &lt;plugin&gt;        &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;        &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;        &lt;version&gt;8.1.9.v20130131&lt;/version&gt;      &lt;/plugin&gt;    &lt;/plugins&gt;  &lt;/build&gt;  &lt;dependencies&gt;    &lt;dependency&gt;      &lt;groupId&gt;javax.json&lt;/groupId&gt;      &lt;artifactId&gt;javax.json-api&lt;/artifactId&gt;      &lt;version&gt;1.0-b06&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;      &lt;groupId&gt;org.glassfish&lt;/groupId&gt;      &lt;artifactId&gt;javax.json&lt;/artifactId&gt;      &lt;version&gt;1.0-b06&lt;/version&gt;      &lt;scope&gt;runtime&lt;/scope&gt;    &lt;/dependency&gt;    &lt;dependency&gt;      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;      &lt;version&gt;3.0.1&lt;/version&gt;      &lt;scope&gt;provided&lt;/scope&gt;    &lt;/dependency&gt;  &lt;/dependencies&gt;&lt;/project&gt;JEE 7 JSON API ExampleThen the next step is start to use JEE7 JSON API// importimport javax.json.Json;import javax.json.JsonArray;import javax.json.JsonArrayBuilder;import java.io.Serializable;import java.util.ArrayList;import java.util.Date;import java.util.List;public class JsonExample {    public static void main(String[] args) {        List&lt;User&gt; users = getUsers();        // build JSON        JsonArrayBuilder jsonArrayBuilder = Json.createArrayBuilder();        for(User user: users) {            jsonArrayBuilder.add(                    Json.createObjectBuilder()                            .add(id, user.getId())                            .add(name, user.getName())                            .add(join, user.getJoin().getTime())            );        }        JsonArray usersJson = jsonArrayBuilder.build();        System.out.println(usersJson.toString());    }    // dummy users    public static List&lt;User&gt; getUsers() {        List&lt;User&gt; users = new ArrayList&lt;User&gt;(10);        User user = new User();        user.setId(1);        user.setName(Hero);        user.setJoin(new Date());        users.add(user);        user = new User();        user.setId(2);        user.setName(Citizen);        user.setJoin(new Date());        users.add(user);        return users;    }    // POJO    public static class User implements Serializable {        private long id;        private String name;        private Date join;        public long getId() {            return id;        }        public void setId(long id) {            this.id = id;        }        public String getName() {            return name;        }        public void setName(String name) {            this.name = name;        }        public Date getJoin() {            return join;        }        public void setJoin(Date join) {            this.join = join;        }    }}Output of the program:[{id:1,name:Hero,join:1366808892498},{id:2,name:Citizen,join:1366808892498}]"
},

  {
  "id"    : "http://dreamand.me/cloud/stop-create-business-that-add-service-to-aws/",
  "title"   : "Stop Create Business That Add Service To Amazon Web Service",
  "content" : "With recent Amazon Web Service (AWS) announcement that new service to their cloud, some of the might companies will be out of business. For example AWS just announced a NodeJS support for their Elastic Beanstalk. In future AWS definitely will adding more service to compete with current providers out there. Which at this point is compete with PaaS providers out there.If you just think about a business that add value to AWS, you can stop it now. Because you don&#8217;t know when AWS will have plan that add that service to their huge platform and bring you down. So is time stop for bootstrap/startup a company that provide additional service to AWS and think something else.AWS is More Than Just IaaS (Soon)The giant busisness that host thousand  of online services such as Reddit, NetFlix still innovating with their platform by adding more services and lowing price. At some point of future, I think they will add some services on top of current platform after they finish innovate on infrastructure. For examle, now they start to adding more services on top of EC2 such as Elastic Beanstalk which is management service (kind of what Platform as a Service doing out there) that supporting Java, Node.js, PHP, Python, and Ruby. I think soon new language will be added (Which language you want? Maybe can requst to AWS). With recent announcement, AWS added AMI Copy for Amazon EC2 that enables you to easily copy your AMIs across AWS regions. If one of your business value is able copy AMI across regions seamlessly, now this feature is not special anymore. Not only Amazon is giant company, their low price is a killing factor that will bring your business down. Unless what you doing is a critical service that have customers willing to pay more.But Not So SoonHowever, AWS will not adding so much services that no other business can add service to their platform. PaaS business might have some worry since Elastic Beanstalk look like is compete with them. For now Elastic Beanstalk still not much features, however, you cant guarantee in next 2-3 years they wouldn&#8217;t catch up. As you can see Heroku&#8217;s innovation in this few years, nothing much changes except they added Database as a Service using Postgresql which is awesome product. But at some point AWS might add Postgresql to their Database as a Service as well right? We can&#8217;t eliminate this possibility since MySQL (as RDS) is available on AWS.Keep InnovatingOf course not only AWS compete with some provider out there, competition is everywhere. Burger King compete with McDonald, your company with other company. In IT world, you can keep innovating your product to gain/retain customers."
},

  {
  "id"    : "http://dreamand.me/web/get-a-web-designer-for-enterprise-application/",
  "title"   : "You Should Get Web Designer for Your Enterprise Application",
  "content" : "A lot of enteprise web applicaions still using iframe and the html code is a mess. When doing maintenance, developers feel pain in the ass when modify the style and html. It is time to get a web designer for enterprise application, right now!Lost in HTML, CSS, and JavascriptEspecially for old system, the developer is designer, they violent  DRY principal. Ten years ago, copy and paste actually is programmer&#8217;s task. No one like pages of messy codes, sometime the code having not usage at all. But now is 21th century, is time to change, hire a web designer for enterprise application, not only for better ui design, but also for cleaner code.Enterprise web application is well known in having a lot of complex forms, a lot of fields in single page. It time to let UX expert to improve those forms. They will have better idea/trick to design that. Of course, sometime add a designer into development is not easy especially people think &#8220;I dont want to break thing&#8221;. But in long term, you will see the benefits.Last ChoiceFor whatever reason if you cant get a web designer, don&#8217;t use homegrow CSS design if you don&#8217;t have web designer, use open source CSS/Javascript toolkit like Twitter Bootstrap, or Zurb Foundation. It is free, cost nothing except learning curve for fundamental CSS/JQuery (developer must know basic CSS as well right?). Futhermore, a lot of open source components/tools around these frameworks like JQuery file upload and Bootsnipp can make your life easier. Still feel pain in the ass when design based on these frameworks? Buy a premium theme (from market Wrapbootstrap), cost you few bucks but save your developers (or even designer) 1-2 weeks time (do your math!), sometime even more. It is not 2-3 pages of forms, it is a lot, sometime up to 50 pages.SummaryTeam lead for enterprise application, stop hiding in cave. Go out and read latest technologies news, open sources tools, hacking on weekends.For &#8220;enterprise&#8221; company that doing enterprise application development, get a designer or use open source CSS/Javascript toolkits or buy a premium theme."
},

  {
  "id"    : "http://dreamand.me/web/fulltext-search-at-jekyll-site/",
  "title"   : "Fulltext Search on Jekyll Site",
  "content" : "I power my blog using jekyll, a static blog generator. Recenty I saw a javascript full text search engine, lunr that really awesome. So I integrate into my blog and now my blog have full text search capibility! Awesome! So in this blog I will document and describe how I did it.Download lunrBefore get started, you need download lunr at https://github.com/olivernn/lunr.js and include in your blog js folder.Index ContentBefore doing full text search, you need to index your blog content. First, create a post.json file in _includes folder as template to render post document:{  id    : http://dreamand.me,  title   : ,  content : }After that, create a search.js at the root of the blog to hold the blog contents:------var docs = [   {  id    : http://dreamand.me/java/java-jee7-jpa-stored-procedure-example/,  title   : Java JEE7 JPA 2.1 Stored Procedure Example,  content : JEE 7, the next release of Java Enterprice for large application will include a new enchanced JPA 2.1. JPA 2.1 now have native support for stored procedure. Folllow this blog post to know how to use soted procedure in JPA 2.1.Let get started how to use JPA 2.1 to execute stored procedure.### DependenciesI use maven to manage dependencies, the following `pom.xml` show the dependencies that I used:~~~            org.eclipse.persistence        javax.persistence        2.1.0                org.eclipse.persistence        org.eclipse.persistence.jpa        2.5.0                    postgresql        postgresql        9.1-901.jdbc4        runtime    ~~~The JPA 2.1 implementation that I use is Eclipselink, which is Reference Implementation for JPA 2.1.Note the database that I use is Postgresql, you can use appropiate JDBC driver for your database. ### Setup persistence.xml for JPA 2.1The `persistence.xml` for JPA 2.1 is similar with that of JPA 2.0, but with the different version of `xsd`. The following shows the persistence.xml that I used for JPA 2.1:~~~&lt;persistence version=2.1 xmlns=http://xmlns.jcp.org/xml/ns/persistence              xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance              xsi:schemaLocation=http://java.sun.com/xml/ns/persistence                                                  http://java.sun.com/xml/ns/persistence/persistence_2_1.xsd&gt;      org.eclipse.persistence.jpa.PersistenceProvider                                        ~~~### Create Stored Procedure For PostgresqlIn this example, I use Postgresql as database. The follows is the stored procedured that I created for this tutorial:~~~CREATE FUNCTION sales_tax(subtotal float, OUT tax float) AS $$BEGIN    tax := subtotal * 0.06;END;$$ LANGUAGE plpgsql;~~~This stored procedure simple take `subtotal` as `IN` then `tax` as `OUT`.### Java JPA 2.1 Stored Procedure CallThe next step is going to the main purpose of the example, call stored procedure in Java JEE7 JPA 2.1, the following is the example code:~~~package me.dreamand.jee7.jpa21;import javax.persistence.EntityManager;import javax.persistence.EntityManagerFactory;import javax.persistence.ParameterMode;import javax.persistence.Persistence;import javax.persistence.StoredProcedureQuery;public class App {    private static final String PERSISTENCE_UNIT_NAME = transactions-optional;    private static EntityManagerFactory factory;    public static void main(String[] args) {        factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);        EntityManager em = factory.createEntityManager();        // Create call stored procedure        em.getTransaction().begin();        StoredProcedureQuery storedProcedure = em.createStoredProcedureQuery(sales_tax);        // set parameters        storedProcedure.registerStoredProcedureParameter(subtotal, Double.class, ParameterMode.IN);        storedProcedure.registerStoredProcedureParameter(tax, Double.class, ParameterMode.OUT);        storedProcedure.setParameter(subtotal, 1f);        // execute SP        storedProcedure.execute();        // get result        Double tax = (Double)storedProcedure.getOutputParameterValue(tax);        System.out.println(Tax is:  + tax);        em.getTransaction().commit();        em.close();    }}~~~Run the `main` method, the console will output the following text:~~~Tax is: 0.06~~~### ConclusionWith the new Java JEE7 JPA 2.1 release bring stored procedure support to the next level without using JDBC low level API. This bring JEE7 to the next most awaited release of JEE.},  {  id    : http://dreamand.me/java/jee7-websocket-example/,  title   : JEE7 WebSocket Example,  content : JEE 7, the next release of Java Enterprice for large application will include a standard WebSocket API for create realtime communication channel over a single TCP connection. The realtime communication allow server to push message to clients in realtime. This tutorial will teach step by step to create a realtime chat program using JEE7 WebSocket API. There are two ways to using  JEE7's WebSocket API, one is using annotations and another is using normal OO concept to extend classes. This tutorial will mainly focus on using annotations based API.### Maven DependenciesRecommended way to manage Java Application's dependencies is using maven. This tutorial will using maven to manage dependencies. Include the following snippet into your pom file `dependencies` section:~~~            javax        javaee-web-api        7.0-b83        provided                javax.websocket        javax.websocket-api        1.0-rc5        provided    ~~~Note that the latest version of WebSocket API is rc5, to get the latest version, please browse to [maven repo websocket][maven repo websocket] to check out.### Annotation UsageBefore get start to use JEE7 WebSocket, let introduce the usage of the annotations:| Annotation       | Description                                           || ---------------- | ----------------------------------------------------- || @ServerEndpoint  | Annotate class as server end point                    || @OnOpen          | Involked when new connection is established           || @OnMessage       | Involked when new message is received                 || @OnClose         | Involked when existing connection is closd            || @OnError         | Involked when there is error in communication channel |### Chat ProgramBased on the annotation usage, we can create a simple chat program using the following code:~~~package me.dreamand.blog.websocket;import java.util.logging.Level;import java.util.logging.Logger;import javax.websocket.OnClose;import javax.websocket.OnError;import javax.websocket.OnMessage;import javax.websocket.OnOpen;import javax.websocket.Session;import javax.websocket.server.ServerEndpoint;@ServerEndpoint(value = /chat)public class ChatServer {        private static final Logger LOGGER =             Logger.getLogger(ChatServer.class.getName());        @OnOpen    public void onOpen(Session session) {        LOGGER.log(Level.INFO, New connection with client: {0},                 session.getId());    }        @OnMessage    public String onMessage(String message, Session session) {        LOGGER.log(Level.INFO, New message from Client [{0}]: {1},                 new Object[] {session.getId(), message});        return Server received [ + message + ];    }        @OnClose    public void onClose(Session session) {        LOGGER.log(Level.INFO, Close connection for client: {0},                 session.getId());    }        @OnError    public void onError(Throwable exception, Session session) {        LOGGER.log(Level.INFO, Error for client: {0}, session.getId());    }}~~~### HTML and Javascript For WebSocketThe next step is to create a client for the chat program. The browser must support WebSocket. The following shows the HTML, CSS, and JavaScript for the browser:~~~            JEE7 WebSocket Example                                    #container {                border: 1px #999999 solid;                padding: 10px;            }            p.client {                border-bottom: 1px aquamarine solid;            }            p.server {                border-bottom: 1px crimson solid;            }            input {                padding: 5px;                width: 250px;            }            button {                padding: 5px;            }                            var chatClient = new WebSocket(ws://localhost:8080/websocket/chat);                        chatClient.onmessage = function(evt) {                var p = document.createElement(p);                p.setAttribute(class, server);                p.innerHTML = Server:  + evt.data;                var container = document.getElementById(container);                container.appendChild(p);            }            function send() {                var input = document.getElementById(message);                var p = document.createElement(p);                p.setAttribute(class, client);                p.innerHTML = Me:  + input.value;                var container = document.getElementById(container);                container.appendChild(p);                chatClient.send(input.value);                input.value = ;            }                        JEE7 WebSocket Example                                            Send    ~~~### Running JEE7 WebSocket ApplictionTo run JEE7 WebSocket enabled application, this tutorial is deploy to GlassFish 4.The following screenshot show the UI and server log for the program:![Initial send message](/img/posts/jee7/chat-1.png Initial send message)![Server reply message](/img/posts/jee7/chat-2.png Server reply message)![Sent second message](/img/posts/jee7/chat-3.png Sent second message)![Server log show activities](/img/posts/jee7/server-log.png Server log show activities)### ConclusionJEE7 is joining the new HTML5 wave for WebSocket for duplex comunication channel. Realtime commication is one of the essential aspect for enterprise application, now with native support without AJAX pooling. In the near future will have large scale applications deploy to use this feature.[websocket]: http://en.wikipedia.org/wiki/WebSocket[maven repo websocket]: http://repo1.maven.org/maven2/javax/websocket/javax.websocket-api/},  {  id    : http://dreamand.me/web/better-url-for-seo/,  title   : Better URL for SEO for E-Commerce and Dynamic Website,  content : Want better SEO for your e-commerce and dynamic website? Want to increase organic search for your e-commerce and dynamic website? This post will shows how to build better URL for your website and increase sell and better page impression.### Use CaseLet say your website is selling cars, and to have better SEO for your site, you can follow this post to design the URL that boost organic search to a better score. ### Identify URL HierarchyTo design a truely SEO friendly URL for this use case, let see what is the hierarchy for cars. To easily identify the hierarchy, you can follow your database design, for example, one make have one to many models, and one models have zero to many post on your website.Then you can know that the URL structur is like:~~~http://exmple.com/make/model/post~~~Thus the actual URL might look like:~~~http://exmple.com/honda/civic/1-honda-civic-for-sell~~~Tips:If the hierarchy is too deep, you can use shorter URL for each individual post, for example:~~~http://exmple.com/show/1-honda-civic-for-sell~~~But remember, include a breadcrumb in the page to let user to navigate up to the hierarchy, for example:~~~Home &gt; Honda &gt; Civic &gt; Honda Civic For Sell~~~By thi way, the visitor will happy and Google Search will intelgent enough to identify your website structure.### SEO Friendly URLAfter identified the URL structure, the next step is to purpose a friendly URL. The followings shows the guideline for friendly URL:1. All lowercase (Yes, some website still mixing uppercase and lowercase)2. No whitespace, and whitespace is replaced by hyphen (-)3. Not too long (Less than 85 characters)4. Contain one to three keywords, not too much5. ASCII only charactersUsing the guideline, a friendly URL example is show at below:~~~http://exmple.com/mercedes-benz/c-class/1-mercedes-benz-c-class-for-sellorhttp://exmple.com/honda/civic/1-honda-civic-for-sell~~~### Better Search Landing PageSo your website contain a search box for visitors to search for what they really want, instead of landing to a page with URL `http://exmple.com/search?q=honda`, you can redirect to a dedicated page for all honda's cars with better SEO URL as follow:~~~http://exmple.com/hondaorhttp://exmple.com/honda/civicfor paginationhttp://exmple.com/honda/civic?page=2~~~By using this tip, you provide a better SEO friendly URL for Search Engine to index and user friendly too.### Ask Google Index Your URLsThe ultimate step is to index all of your URLs using `sitemap.xml` by generating all of the possible URLs for your website. But do not generate individual URL for each post in `sitemap.xml`, instead, Google will index the individual post via the search landing page.Example of `sitemap.xml`:~~~&lt;urlset    xmlns=http://www.sitemaps.org/schemas/sitemap/0.9    xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance    xsi:schemaLocation=http://www.sitemaps.org/schemas/sitemap/0.9            http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&gt;      http://example.com    daily    0.8        http://example.com/audi    daily        http://example.com/hyundai    daily  ~~~{: .language-xml}Sitemaps are particularly helpful if:1. Your site has dynamic content.2. Your site has pages that aren't easily discoverd by Googlebot during the crawl process-for example, pages featuring rich AJAX or images.3. Your site is new and has few links to it. (Googlebot crawls the web by following links from one page to another, so if your site isn't well linked, it may be hard to Google to discover it.)### ConclusionFollowing this post's tips and guideline, you can increase your website's organic search impression and more visitors will visit your site.},  {  id    : http://dreamand.me/java/jee7-json-example/,  title   : JEE7 JSON API Example,  content : JEE 7, the next release of Java Enterprice Edition for large application will include a standard JSON API without using third party JSON API such as [JSON.org][jsobn-org]. Is time to use standard API for Java web development.### SetupI use [maven][maven] for managing dependencies and the RI for JSON API is from [glassfish][glassfish]. You can download the jars into your project as well from [json-api][json-api] and [json-ri][json-ri] from maven site if you not using maven to manage dependency. The example `pom.xml` is as below:~~~&lt;project xmlns=http://maven.apache.org/POM/4.0.0         xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance         xsi:schemaLocation=http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&gt;  4.0.0  me.dreamand  json  1.0.0-SNAPSHOT                    org.mortbay.jetty        jetty-maven-plugin        8.1.9.v20130131                        javax.json      javax.json-api      1.0-b06              org.glassfish      javax.json      1.0-b06      runtime              javax.servlet      javax.servlet-api      3.0.1      provided      ~~~### JEE 7 JSON API ExampleThen the next step is start to use JEE7 JSON API~~~// importimport javax.json.Json;import javax.json.JsonArray;import javax.json.JsonArrayBuilder;import java.io.Serializable;import java.util.ArrayList;import java.util.Date;import java.util.List;public class JsonExample {    public static void main(String[] args) {        List users = getUsers();        // build JSON        JsonArrayBuilder jsonArrayBuilder = Json.createArrayBuilder();        for(User user: users) {            jsonArrayBuilder.add(                    Json.createObjectBuilder()                            .add(id, user.getId())                            .add(name, user.getName())                            .add(join, user.getJoin().getTime())            );        }        JsonArray usersJson = jsonArrayBuilder.build();        System.out.println(usersJson.toString());    }    // dummy users    public static List getUsers() {        List users = new ArrayList(10);        User user = new User();        user.setId(1);        user.setName(Hero);        user.setJoin(new Date());        users.add(user);        user = new User();        user.setId(2);        user.setName(Citizen);        user.setJoin(new Date());        users.add(user);        return users;    }    // POJO    public static class User implements Serializable {        private long id;        private String name;        private Date join;        public long getId() {            return id;        }        public void setId(long id) {            this.id = id;        }        public String getName() {            return name;        }        public void setName(String name) {            this.name = name;        }        public Date getJoin() {            return join;        }        public void setJoin(Date join) {            this.join = join;        }    }}~~~Output of the program:~~~[{id:1,name:Hero,join:1366808892498},{id:2,name:Citizen,join:1366808892498}]~~~[json-org]: http://json.org/java/[maven]: http://maven.apache.org/[json-api]: http://repo1.maven.org/maven2/javax/json/javax.json-api/[json-ri]: http://repo1.maven.org/maven2/org/glassfish/javax.json/[glassfish]: http://glassfish.java.net/},  {  id    : http://dreamand.me/cloud/stop-create-business-that-add-service-to-aws/,  title   : Stop Create Business That Add Service To Amazon Web Service,  content : With recent [Amazon Web Service (AWS)][aws] announcement that new service to their cloud, some of the might companies will be out of business. For example AWS just announced a [NodeJS support][nodejs-aws] for their [Elastic Beanstalk][beanstalk]. In future AWS definitely will adding more service to compete with current providers out there. Which at this point is compete with PaaS providers out there.If you just think about a business that add value to AWS, you can stop it now. Because you don't know when AWS will have plan that add that service to their huge platform and bring you down. So is time stop for bootstrap/startup a company that provide additional service to AWS and think something else.### AWS is More Than Just IaaS (Soon)The giant busisness that host thousand  of online services such as [Reddit][reddit], [NetFlix][netflix] still innovating with their platform by adding more services and lowing price. At some point of future, I think they will add some services on top of current platform after they **finish** innovate on infrastructure. For examle, now they start to adding more services on top of EC2 such as [Elastic Beanstalk][beanstalk] which is management service (kind of what Platform as a Service doing out there) that supporting Java, Node.js, PHP, Python, and Ruby. I think soon new language will be added (Which language you want? Maybe can requst to AWS). With recent announcement, AWS added [AMI Copy for Amazon EC2][copy] that enables you to easily copy your AMIs across AWS regions. If one of your business value is able **copy AMI across regions seamlessly**, now this feature is not **special** anymore. Not only Amazon is giant company, their low price is a killing factor that will bring your business down. Unless what you doing is a critical service that have customers willing to pay more.### But Not So SoonHowever, AWS will not adding so much services that no other business can add service to their platform. PaaS business might have some worry since [Elastic Beanstalk][beanstalk] look like is compete with them. For now [Elastic Beanstalk][beanstalk] still not much features, however, you cant guarantee in next 2-3 years they wouldn't catch up. As you can see [Heroku][heroku]'s innovation in this few years, nothing much changes except they added Database as a Service using [Postgresql][postgresql] which is awesome product. But at some point AWS might add [Postgresql][postgresql] to their Database as a Service as well right? We can't eliminate this possibility since MySQL (as RDS) is available on AWS.### Keep InnovatingOf course not only AWS compete with some provider out there, competition is everywhere. Burger King compete with McDonald, your company with other company. In IT world, you can keep innovating your product to gain/retain customers.[aws]: http://aws.amazon.com[nodejs-aws]: http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs.html[beanstalk]: http://aws.amazon.com/elasticbeanstalk[copy]: http://aws.amazon.com/about-aws/whats-new/2013/03/12/announcing-ami-copy-for-amazon-ec2/[reddit]: http://reddit.com[netflix]: www.netflix.com[heroku]: http://www.heroku.com[postgresql]: http://www.postgresql.org/},  {  id    : http://dreamand.me/web/get-a-web-designer-for-enterprise-application/,  title   : You Should Get Web Designer for Your Enterprise Application,  content : A lot of enteprise web applicaions still using `iframe` and the html code is a mess. When doing maintenance, developers feel pain in the ass when modify the style and html. It is time to get a web designer for enterprise application, right now!### Lost in HTML, CSS, and Javascript![Messy HTML](/img/posts/messy-html.jpg Messy HTML)Especially for old system, the developer is designer, they violent  **DRY** principal. Ten years ago, copy and paste actually is programmer's task. No one like pages of messy codes, sometime the code having not usage at all. But now is 21th century, is time to change, hire a web designer for enterprise application, not only for better ui design, but also for cleaner code.Enterprise web application is well known in having a lot of complex forms, a lot of fields in single page. It time to let UX expert to improve those forms. They will have better idea/trick to design that. Of course, sometime add a designer into development is not easy especially people think I dont want to break thing. But in long term, you will see the benefits.### Last Choice![Twitter Bootstrap and Zurb Foundation](/img/posts/bootstrap-fundation.png Twitter Bootstrap and Zurb Foundation)For whatever reason if you cant get a web designer, don't use homegrow CSS design if you don't have web designer, use open source CSS/Javascript toolkit like [Twitter Bootstrap][bootstrap], or [Zurb Foundation][foundation]. It is free, cost nothing except learning curve for fundamental CSS/JQuery (developer must know basic CSS as well right?). Futhermore, a lot of open source components/tools around these frameworks like [JQuery file upload][fileupload] and [Bootsnipp][bootsnipp] can make your life easier. Still feel pain in the ass when design based on these frameworks? Buy a premium theme (from market [Wrapbootstrap][wrapbootstrap]), cost you few bucks but save your developers (or even designer) 1-2 weeks time (do your math!), sometime even more. It is not 2-3 pages of forms, it is a lot, sometime up to 50 pages.### SummaryTeam lead for enterprise application, stop hiding in cave. Go out and read latest technologies news, open sources tools, hacking on weekends.For enterprise company that doing enterprise application development, get a designer or use open source CSS/Javascript toolkits or buy a premium theme.[bootstrap]: http://twitter.github.com/bootstrap/[foundation]: http://foundation.zurb.com/[fileupload]: http://blueimp.github.com/jQuery-File-Upload/[bootsnipp]: http://bootsnipp.com/[wrapbootstrap]: https://wrapbootstrap.com/},  {  id    : http://dreamand.me/web/fulltext-search-at-jekyll-site/,  title   : Fulltext Search on Jekyll Site,  content : I power my blog using jekyll, a static blog generator. Recenty I saw a javascript full text search engine, [lunr][lunr] that really awesome. So I integrate into my blog and now my blog have full text search capibility! Awesome! So in this blog I will document and describe how I did it.### Download lunrBefore get started, you need download [lunr][lunr] at https://github.com/olivernn/lunr.js and include in your blog js folder.### Index ContentBefore doing full text search, you need to index your blog content. First, create a `post.json` file in `_includes` folder as template to render post document:~~~{  id    : http://dreamand.me{{ post.url }},  title   : {{ post.title }},  content : {{ post.content | strip_html | strip_newlines | remove:''  }}}~~~After that, create a `search.js` at the root of the blog to hold the blog contents:~~~------var docs = [ {% for post in site.posts limit:10 %}  {% include post.json %},{% endfor %}];// init lunrvar idx = lunr(function () {  this.field('title', 10);  this.field('content');})// add each document to be indexfor(var index in docs) {  idx.add(docs[index]);}~~~**Note:** The file must begin with YAML front matter block so it will be processed by Jekyll as special files.Now your blog is index under `idx` object and you can search it. At the end of the documents, create a `lunr` with index fields **title** and **content** to be index.### SearchNow is time to create search capibility using html, javascript. First, include `search.js` and `lunr` js in your site:~~~~~~Is time to create `form` element for user to search, I have created partial `search.html` for display search form:~~~  Search                  GO!      ~~~Finally, add jquery to handle search event, add into `search.js` or other javascript file:~~~$(function() {  $(#search button).click(function() {    search();  });  $(#search input).keypress(function(e) {    if(e.which == 13) {      e.preventDefault();      search();    }  });})function search() {  var result = idx.search($(#search input).val());  if(result &amp;&amp; result.length &gt; 0) {    window.location.replace(result[0].ref);  } else {    alert(Found nothing);  }}~~~### ImprovementCurrently the search is not so user friendly where autocomplete is not available. When I am free I will improve it.### SummaryUsing [lunr][lunr], we able to bring the power of fulltext search to static generated blog, [jekyll][jekyll]. Cool.[lunr]: https://github.com/olivernn/lunr.js[jekyll]: http://jekyllrb.com/},  {  id    : http://dreamand.me/web/internet-scammer/,  title   : How Internet Scammer Setup Scam,  content : I come across a site that displayed a intersting ads, earn money from home, so I clicked the ads. Then I landed a page. After have a look on the page, I immediately know it is a scam. In this post I will describe how they scam.The landing page is at here. WARNING: Do not submit your credit card infromation.Fake FamousOne way to trick victim is to make the offer is so famous that it appear on your country&amp;#8217;s news. On this landing page, I notice there is one &amp;#8220;AS SEEN ON&amp;#8221; section which display my country&amp;#8217;s newspaper publishers.After open the image in new tab, I notice the scammer use country specific &amp;#8220;AS SEEN ON&amp;#8221; images. So there are several fake famous images as following:SingaporeThailandIndonesiaFake Expire DateOne tactic I notice is the expired date of the offer, which is dynamically generate via JavaScript, thus the expired date is always next day. This make the victim fall in the trick to get the offer before expired.Fake CommentsFuther to trick victim, the scammer created few fake comments to indicate it is really work.Ask For PaymentAfter click some links, it finally come to a page mention for one-time payment. After click to get started, it link to a payment page ask for credit card details. Then victim will finally fall in to their scam.Ask for PaymentAsk for Credit Card InformationFinal step is to trick victim to fill in credit card information.ConclusionDon&amp;#8217;t ever submit your credit card to untrusted party.},  {  id    : http://dreamand.me/cloud/how-to-update-appfog-apps-without-downtime/,  title   : How To Update AppFog App With Scheduled Downtime Page,  content : Appfog is one of the fast growing PaaS providers out there, however, some of the feature is not available yet, for example, a custom page to show during scheduled down time. This is one of the feature request, please vote it to make sure AppFog will implement this ASAP.In this post, I will describe how to make your own maintanance page, so let&amp;#8217;s get started.AppFog Default Error PageAppFog display their default error page when your site is down during update, which is kind of not so userfriendly for your site visitor.Create a App to Display Scheduled Downtime PageTo display scheduled downtime page, you will need a simple app hosted at AppFog, most recommended way is to create a simple small Ruby Sinatra, NodeJS Express, or Python Flask app. I will not go through how to create those app in details, you can find a lot tutorials via Google Search.Before Update AppFogBefore update your main app, you need bind the scheduled downtime app to your main app&amp;#8217;s domain. For example, is your main app domain is yourdomain.com, then you need bind scheculed downtime app into this domain before you update the main app.Screenshot:Update AppFog AppOnce your scheduled downtime page app is bind to same domain as your main app, you can start to update main app. During the main app&amp;#8217;s downtime, all visitors will serve by your custom scheduled downtime page app without showing AppFog&amp;#8217;s default error page thus increase your site engagement. You can futher develop the app to let user to enter email address to notify them after update is completed.},  {  id    : http://dreamand.me/web-development/how-to-load-adbrite-faster/,  title   : How To Load Adbrite Ads Faster/Asynchronously at Your Site,  content : adBrite is the largest independent ad exchange, reaching 300 million global unique visitors every month, including more than 150 million in the U.S. It is alternative to Google Adsense.In this post, I will describe how to make adBrite ads load faster at your site to increase your site engagement.Theory Behind Load Adbrite Ads FasterBefore implement the changes, let understand how to load Adbrite ads faster. Most modern browsers load iframe asynchronously without blocking other elements, thus the technique to load Adbrite ads faster/asynchronously is using html iframe.Create Iframe PageFirst for all, you need create a iframe page for your site to include the code provided by adBrite and name it as ads-banner.html. You can create few html for different types of ads.Example iframe code:&amp;lt;html&amp;gt;&amp;lt;body style=margin: 0; padding: 0;&amp;gt;&amp;lt;!-- Begin: adBrite, Generated: 2013-01-18 20:56:53  --&amp;gt;&amp;lt;!-- your adbrite code goes here --&amp;gt;&amp;lt;!-- End: adBrite --&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;Include Iframe to show adBrite AdsTo include adBrite ads, you need add a iframe element to the placement where you want to show ads.&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;	&amp;lt;header&amp;gt;...&amp;lt;/header&amp;gt;	&amp;lt;section id=content&amp;gt;...&amp;lt;/section&amp;gt;	&amp;lt;section id=site-bar&amp;gt;...&amp;lt;/section&amp;gt;	&amp;lt;section id=banner&amp;gt;		&amp;lt;!-- add a iframe to link to your ads code --&amp;gt;		&amp;lt;iframe src=/ads-banner.html frameborder=0&amp;gt;&amp;lt;/iframe&amp;gt;	&amp;lt;/section&amp;gt;	&amp;lt;footer&amp;gt;...&amp;lt;/footer&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;Test adBdite Ads Load TimeAfter you implement these changes, you will notice the page load time is significantly faster. Enjoy this enhancement and increase site engagement!},];// init lunrvar idx = lunr(function () {  this.field('title', 10);  this.field('content');})// add each document to be indexfor(var index in docs) {  idx.add(docs[index]);}Note: The file must begin with YAML front matter block so it will be processed by Jekyll as special files.Now your blog is index under idx object and you can search it. At the end of the documents, create a lunr with index fields title and content to be index.SearchNow is time to create search capibility using html, javascript. First, include search.js and lunr js in your site:&lt;script src=/js/lunr.min.js&gt;&lt;/script&gt;&lt;script src=/search.js&gt;&lt;/script&gt;Is time to create form element for user to search, I have created partial search.html for display search form:&lt;div class=minor well shadow&gt;  &lt;h3&gt;Search&lt;/h3&gt;  &lt;form&gt;    &lt;div class=input-append&gt;      &lt;input type=search name=q id=q placeholder=Enter keywords.../&gt;      &lt;button class=btn type=button&gt;GO!&lt;/button&gt;    &lt;/div&gt;  &lt;/form&gt;&lt;/div&gt;Finally, add jquery to handle search event, add into search.js or other javascript file:$(function() {  $(#search button).click(function() {    search();  });  $(#search input).keypress(function(e) {    if(e.which == 13) {      e.preventDefault();      search();    }  });})function search() {  var result = idx.search($(#search input).val());  if(result &amp;&amp; result.length &gt; 0) {    window.location.replace(result[0].ref);  } else {    alert(Found nothing);  }}ImprovementCurrently the search is not so user friendly where autocomplete is not available. When I am free I will improve it.SummaryUsing lunr, we able to bring the power of fulltext search to static generated blog, jekyll. Cool."
},

  {
  "id"    : "http://dreamand.me/web/internet-scammer/",
  "title"   : "How Internet Scammer Setup Scam",
  "content" : "I come across a site that displayed a intersting ads, earn money from home, so I clicked the ads. Then I landed a page. After have a look on the page, I immediately know it is a scam. In this post I will describe how they scam.The landing page is at here. WARNING: Do not submit your credit card infromation.Fake FamousOne way to trick victim is to make the offer is so famous that it appear on your country&#8217;s news. On this landing page, I notice there is one &#8220;AS SEEN ON&#8221; section which display my country&#8217;s newspaper publishers.After open the image in new tab, I notice the scammer use country specific &#8220;AS SEEN ON&#8221; images. So there are several fake famous images as following:SingaporeThailandIndonesiaFake Expire DateOne tactic I notice is the expired date of the offer, which is dynamically generate via JavaScript, thus the expired date is always next day. This make the victim fall in the trick to get the offer before expired.Fake CommentsFuther to trick victim, the scammer created few fake comments to indicate it is really work.Ask For PaymentAfter click some links, it finally come to a page mention for one-time payment. After click to get started, it link to a payment page ask for credit card details. Then victim will finally fall in to their scam.Ask for PaymentAsk for Credit Card InformationFinal step is to trick victim to fill in credit card information.ConclusionDon&#8217;t ever submit your credit card to untrusted party."
},

  {
  "id"    : "http://dreamand.me/cloud/how-to-update-appfog-apps-without-downtime/",
  "title"   : "How To Update AppFog App With Scheduled Downtime Page",
  "content" : "Appfog is one of the fast growing PaaS providers out there, however, some of the feature is not available yet, for example, a custom page to show during scheduled down time. This is one of the feature request, please vote it to make sure AppFog will implement this ASAP.In this post, I will describe how to make your own maintanance page, so let&#8217;s get started.AppFog Default Error PageAppFog display their default error page when your site is down during update, which is kind of not so userfriendly for your site visitor.Create a App to Display Scheduled Downtime PageTo display scheduled downtime page, you will need a simple app hosted at AppFog, most recommended way is to create a simple small Ruby Sinatra, NodeJS Express, or Python Flask app. I will not go through how to create those app in details, you can find a lot tutorials via Google Search.Before Update AppFogBefore update your main app, you need bind the scheduled downtime app to your main app&#8217;s domain. For example, is your main app domain is yourdomain.com, then you need bind scheculed downtime app into this domain before you update the main app.Screenshot:Update AppFog AppOnce your scheduled downtime page app is bind to same domain as your main app, you can start to update main app. During the main app&#8217;s downtime, all visitors will serve by your custom scheduled downtime page app without showing AppFog&#8217;s default error page thus increase your site engagement. You can futher develop the app to let user to enter email address to notify them after update is completed."
},

  {
  "id"    : "http://dreamand.me/web-development/how-to-load-adbrite-faster/",
  "title"   : "How To Load Adbrite Ads Faster/Asynchronously at Your Site",
  "content" : "adBrite is the largest independent ad exchange, reaching 300 million global unique visitors every month, including more than 150 million in the U.S. It is alternative to Google Adsense.In this post, I will describe how to make adBrite ads load faster at your site to increase your site engagement.Theory Behind Load Adbrite Ads FasterBefore implement the changes, let understand how to load Adbrite ads faster. Most modern browsers load iframe asynchronously without blocking other elements, thus the technique to load Adbrite ads faster/asynchronously is using html iframe.Create Iframe PageFirst for all, you need create a iframe page for your site to include the code provided by adBrite and name it as ads-banner.html. You can create few html for different types of ads.Example iframe code:&lt;html&gt;&lt;body style=margin: 0; padding: 0;&gt;&lt;!-- Begin: adBrite, Generated: 2013-01-18 20:56:53  --&gt;&lt;!-- your adbrite code goes here --&gt;&lt;!-- End: adBrite --&gt;&lt;/body&gt;&lt;/html&gt;Include Iframe to show adBrite AdsTo include adBrite ads, you need add a iframe element to the placement where you want to show ads.&lt;html&gt;&lt;body&gt;	&lt;header&gt;...&lt;/header&gt;	&lt;section id=content&gt;...&lt;/section&gt;	&lt;section id=site-bar&gt;...&lt;/section&gt;	&lt;section id=banner&gt;		&lt;!-- add a iframe to link to your ads code --&gt;		&lt;iframe src=/ads-banner.html frameborder=0&gt;&lt;/iframe&gt;	&lt;/section&gt;	&lt;footer&gt;...&lt;/footer&gt;&lt;/body&gt;&lt;/html&gt;Test adBdite Ads Load TimeAfter you implement these changes, you will notice the page load time is significantly faster. Enjoy this enhancement and increase site engagement!"
},

];
// init lunr
var idx = lunr(function () {
  this.field('title', 10);
  this.field('content');
})
// add each document to be index
for(var index in docs) {
  idx.add(docs[index]);
}

$(function() {
  $("#search button").click(function() {
    search();
  });
  $("#search input").keypress(function(e) {
    if(e.which == 13) {
      e.preventDefault();
      search();
    }
  });
})

function search() {
  var result = idx.search($("#search input").val());
  if(result && result.length > 0) {
    window.location.replace(result[0].ref);
  } else {
    alert("Found nothing");
  }
}
