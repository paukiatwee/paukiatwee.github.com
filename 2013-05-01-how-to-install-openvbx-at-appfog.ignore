<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Pau Kiat Wee" />
    
    
    <meta name="robots" content="noodp, noydir" />
    
    
    <meta name="keywords" content="appfog, openvbs, bulk sms, sms marketing, twilio, clodfoundry" />
    
    
    <meta name="description" content="Install OpenVBX at CloudFoundry/AppFog to send bulk SMS within minutes for free" />
    
    
    
    <title>Install OpenVBX at CloudFoundry/AppFog to Send Bulk SMS | Dream and Me</title>
    
    <link href="/css/style.css" rel="stylesheet">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-33747052-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
  <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/"><i class="icon-home font"></i>Home</a></li>
              <li><a href="/app/"><i class="icon-bolt font"></i>Apps</a></li>
              <li><a href="/privacy/"><i class="icon-lock font"></i>Privacy</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="span8">
          <div class="well main shadow">
            <h2>Install OpenVBX at CloudFoundry/AppFog to Send Bulk SMS</h2>
<div class="social-share"><small></small>&nbsp;&nbsp;&nbsp;
  <div class="tweet"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://dreamandme.com/2013-05-01-how-to-install-openvbx-at-appfog.ignore" data-text="Install OpenVBX at CloudFoundry/AppFog to Send Bulk SMS">Tweet</a></div>
  <div class="g-plusone" data-size="medium"></div>
</div>

<div class="content">
<p>Ever wonder how to setup your own SMS gateway within minutes without actually code the app for 6 months? Now with <a href="https://www.appfog.com">AppFog</a>/<a href="http://www.cloudfoundry.com">Cloud Foundry</a>, <a href="http://www.twilio.com">Twilio</a> and <a href="http://www.openvbx.org">OpenVBX</a> you can make it happen within minutes!</p>

<p><a href="http://www.openvbx.org">OpenVBX</a> allows developers to build voice and SMS applications for business, such as toll free phone numbers, call forwarding, voicemail, visual voicemail, voicemail transcriptions, and auto-attendants.  It&#8217;s like Google Voice, but open source and for business.</p>

<!--more-->

<h3 id="prerequisite">Prerequisite</h3>
<p>Before get started, you need have the following accounts, so if you does not yet, please go sign up:</p>

<ul>
  <li><a href="https://www.appfog.com">AppFog</a> or <a href="http://www.cloudfoundry.com">Cloud Foundry</a></li>
  <li><a href="http://www.twilio.com">Twilio</a></li>
</ul>

<p>Then you download <a href="http://www.openvbx.org">OpenVBX</a> from their site and unzip to a folder.</p>

<p><img src="/img/posts/download-openvbx.png" alt="Download OpenVBX" title="Download OpenVBX" /></p>

<h3 id="install-openvbx-at-appfog">Install OpenVBX at AppFog</h3>

<h4 id="prepare-to-get-appfog-database-credential">Prepare To Get AppFog Database Credential</h4>

<p>AppFog&#8217;s web console does not display database credential and <code>af tunnel</code> does not display the database URL for us to connect, so the only solution is to modify our PHP code to expose <code>VCAP_SERVICES</code> environment variable. To do so, duplicate <code>config/database-sample.php</code> as <code>config/database.php</code> and use the following code:</p>

<pre><code>// extra VCAP_SERVICES
$services_json = json_decode(getenv("VCAP_SERVICES"),true);
$mysql_config = $services_json["mysql-5.1"][0]["credentials"];

$username = $mysql_config["username"];
$password = $mysql_config["password"];
$hostname = $mysql_config["hostname"];
$port = $mysql_config["port"];
$db = $mysql_config["name"];



$active_group = "default";
$active_record = TRUE;

$db["default"]["hostname"] = $hostname.":".$port;
$db["default"]["username"] = $username;
$db["default"]["password"] = $password;
$db["default"]["database"] = $db;
$db["default"]["dbdriver"] = "mysql";
$db["default"]["dbprefix"] = "";
$db["default"]["pconnect"] = TRUE;
$db["default"]["db_debug"] = TRUE;
$db["default"]["cache_on"] = FALSE;
$db["default"]["cachedir"] = "";
$db["default"]["char_set"] = "utf8";
$db["default"]["dbcollat"] = "utf8_general_ci";
</code></pre>

<h4 id="login">Login</h4>

<p>First, you need login to <a href="https://www.appfog.com">AppFog</a> using <code>af</code> command line tool.</p>

<pre><code>af login
Attempting login to [https://api.appfog.com]
Email: username@domain.com
Password: **********
Successfully logged into [https://api.appfog.com]
</code></pre>

<h4 id="create-appfog-app">Create AppFog App</h4>

<pre><code>af push dreamandme-opevbx
Would you like to deploy from the current directory? [Yn]: y
Detected a PHP Application, is this correct? [Yn]: y
1: AWS US East - Virginia
2: AWS EU West - Ireland
3: AWS Asia SE - Singapore
4: Rackspace AZ 1 - Dallas
5: HP AZ 2 - Las Vegas
Select Infrastructure: 3
Application Deployed URL [dreamandme-opevbx.ap01.aws.af.cm]:
Memory reservation (128M, 256M, 512M, 1G, 2G) [128M]:
How many instances? [1]:
Create services to bind to 'dreamandme-opevbx'? [yN]: y
1: mongodb
2: mysql
3: postgresql
4: rabbitmq
5: redis
What kind of service?: 2
Specify the name of the service [mysql-1cf3c]: openvbx-database
Create another? [yN]:
Would you like to save this configuration? [yN]:
Creating Application: OK
Creating Service [openvbx-database]: OK
Binding Service [openvbx-database]: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (44K): OK
Push Status: OK
Staging Application 'dreamandme-opevbx': OK
Starting Application 'dreamandme-opevbx': OK

</code></pre>

<p>Go to your OpenVBX URL, you can see the app is deployed ucessfully.</p>

<p><img src="/img/posts/openvbx-running.png" alt="OpenVBX running" title="OpenVBX running" /></p>

<h3 id="setup-database-credential-in-openvbx">Setup Database Credential in OpenVBX</h3>

<p>After we have deploy and they to browse to to get database credential, we need to write into config file, duplicate <code>config/database-sample.php</code> as <code>config/database.php</code> and fill in nessasery details:</p>

<pre><code>$active_group = "default";
$active_record = TRUE;

$db["default"]["hostname"] = "localhost:8889";
$db["default"]["username"] = "root";
$db["default"]["password"] = "root";
$db["default"]["database"] = "OpenVBX";
$db["default"]["dbdriver"] = "mysql";
$db["default"]["dbprefix"] = "";
$db["default"]["pconnect"] = TRUE;
$db["default"]["db_debug"] = TRUE;
$db["default"]["cache_on"] = FALSE;
$db["default"]["cachedir"] = "";
$db["default"]["char_set"] = "utf8";
$db["default"]["dbcollat"] = "utf8_general_ci";
</code></pre>


</div>
<br />
<small>Filed under <a href="/cloud/">cloud</a></small>
<hr>
<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'dream-and-me';
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

          </div>
        </div>
          <div class="span4">
          <div class="side-ads shadow">
	<script type="text/javascript"><!--
    google_ad_client = "ca-pub-5752526205860544";
    /* side 300x250 */
    google_ad_slot = "7080423381";
    google_ad_width = 300;
    google_ad_height = 250;
  //-->
  </script>
  <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
          <div class="minor well shadow">
  <h3>Search</h3>
  <form id="search">
    <div class="input-append">
      <input type="search" name="q" id="q" placeholder="Enter keywords..." class="input-medium"/>
      <button class="btn" type="button">GO!</button>
    </div>
  </form>
</div>
          <div class="minor well shadow">
  <h3>Find Me</h3>
  <ul class="unstyled">
    <li><i class="icon-rss"></i>Subscribe via <a href="/feed.xml" target="_blank">RSS</a></li>
    <li><i class="icon-twitter"></i>Follow me at <a href="http://twitter.com/paukiatwee">Twitter</a></li>
    <li><i class="icon-github"></i>Fork me at <a href="https://github.com/paukiatwee">Github</a></li>
  </ul>
</div>

          <div class="minor well shadow">
  <h3>Categories</h3>
  
    <ul class="unstyled">
    
      <li><a href="/github-page">github-page (2)</a></li>
    
      <li><a href="/app">app (1)</a></li>
    
      <li><a href="/cloud">cloud (6)</a></li>
    
      <li><a href="/administration">administration (1)</a></li>
    
      <li><a href="/web-development">web-development (1)</a></li>
    
      <li><a href="/web">web (4)</a></li>
    
      <li><a href="/java">java (4)</a></li>
    
    </ul>
  
</div>


          </div>
      </div>
      <div class="row">
        <div class="span12">
          <hr />
<footer>
  &copy; 2012 Pau Kiat Wee
</footer>

        </div>
      </div>
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="/js/jquery.flot.js"></script>
    <script src="/js/jquery.flot.navigate.js"></script>
    <script src="/js/jquery.flot.resize.js"></script>
    <script src="/js/jquery.flot.axislabels.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/lunr.min.js"></script>
    <script src="/search.js"></script>
    <script src="/js/front.js"></script>
  </body>
</html>
